ARM GAS  C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"bsp_driver_sd.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "FATFS/Target/bsp_driver_sd.c"
  20              		.section	.text.BSP_SD_ITConfig,"ax",%progbits
  21              		.align	1
  22              		.weak	BSP_SD_ITConfig
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	BSP_SD_ITConfig:
  28              	.LFB135:
   1:FATFS/Target/bsp_driver_sd.c **** /* USER CODE BEGIN Header */
   2:FATFS/Target/bsp_driver_sd.c **** /**
   3:FATFS/Target/bsp_driver_sd.c ****  ******************************************************************************
   4:FATFS/Target/bsp_driver_sd.c ****   * @file    bsp_driver_sd.c for F4 (based on stm324x9i_eval_sd.c)
   5:FATFS/Target/bsp_driver_sd.c ****  * @brief   This file includes a generic uSD card driver.
   6:FATFS/Target/bsp_driver_sd.c ****  *          To be completed by the user according to the board used for the project.
   7:FATFS/Target/bsp_driver_sd.c ****  * @note    Some functions generated as weak: they can be overridden by
   8:FATFS/Target/bsp_driver_sd.c ****  *          - code in user files
   9:FATFS/Target/bsp_driver_sd.c ****  *          - or BSP code from the FW pack files
  10:FATFS/Target/bsp_driver_sd.c ****  *          if such files are added to the generated project (by the user).
  11:FATFS/Target/bsp_driver_sd.c ****  ******************************************************************************
  12:FATFS/Target/bsp_driver_sd.c ****   * @attention
  13:FATFS/Target/bsp_driver_sd.c ****   *
  14:FATFS/Target/bsp_driver_sd.c ****   * Copyright (c) 2024 STMicroelectronics.
  15:FATFS/Target/bsp_driver_sd.c ****   * All rights reserved.
  16:FATFS/Target/bsp_driver_sd.c ****   *
  17:FATFS/Target/bsp_driver_sd.c ****   * This software is licensed under terms that can be found in the LICENSE file
  18:FATFS/Target/bsp_driver_sd.c ****   * in the root directory of this software component.
  19:FATFS/Target/bsp_driver_sd.c ****   * If no LICENSE file comes with this software, it is provided AS-IS.
  20:FATFS/Target/bsp_driver_sd.c ****   *
  21:FATFS/Target/bsp_driver_sd.c ****  ******************************************************************************
  22:FATFS/Target/bsp_driver_sd.c ****  */
  23:FATFS/Target/bsp_driver_sd.c **** /* USER CODE END Header */
  24:FATFS/Target/bsp_driver_sd.c **** 
  25:FATFS/Target/bsp_driver_sd.c **** #ifdef OLD_API
  26:FATFS/Target/bsp_driver_sd.c **** /* kept to avoid issue when migrating old projects. */
  27:FATFS/Target/bsp_driver_sd.c **** /* USER CODE BEGIN 0 */
  28:FATFS/Target/bsp_driver_sd.c **** 
  29:FATFS/Target/bsp_driver_sd.c **** /* USER CODE END 0 */
  30:FATFS/Target/bsp_driver_sd.c **** #else
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s 			page 2


  31:FATFS/Target/bsp_driver_sd.c **** /* USER CODE BEGIN FirstSection */
  32:FATFS/Target/bsp_driver_sd.c **** /* can be used to modify / undefine following code or add new definitions */
  33:FATFS/Target/bsp_driver_sd.c **** /* USER CODE END FirstSection */
  34:FATFS/Target/bsp_driver_sd.c **** /* Includes ------------------------------------------------------------------*/
  35:FATFS/Target/bsp_driver_sd.c **** #include "bsp_driver_sd.h"
  36:FATFS/Target/bsp_driver_sd.c **** 
  37:FATFS/Target/bsp_driver_sd.c **** /* Extern variables ---------------------------------------------------------*/
  38:FATFS/Target/bsp_driver_sd.c **** 
  39:FATFS/Target/bsp_driver_sd.c **** extern SD_HandleTypeDef hsd;
  40:FATFS/Target/bsp_driver_sd.c **** 
  41:FATFS/Target/bsp_driver_sd.c **** /* USER CODE BEGIN BeforeInitSection */
  42:FATFS/Target/bsp_driver_sd.c **** /* can be used to modify / undefine following code or add code */
  43:FATFS/Target/bsp_driver_sd.c **** /* USER CODE END BeforeInitSection */
  44:FATFS/Target/bsp_driver_sd.c **** /**
  45:FATFS/Target/bsp_driver_sd.c ****   * @brief  Initializes the SD card device.
  46:FATFS/Target/bsp_driver_sd.c ****   * @retval SD status
  47:FATFS/Target/bsp_driver_sd.c ****   */
  48:FATFS/Target/bsp_driver_sd.c **** __weak uint8_t BSP_SD_Init(void)
  49:FATFS/Target/bsp_driver_sd.c **** {
  50:FATFS/Target/bsp_driver_sd.c ****   uint8_t sd_state = MSD_OK;
  51:FATFS/Target/bsp_driver_sd.c ****   /* Check if the SD card is plugged in the slot */
  52:FATFS/Target/bsp_driver_sd.c ****   if (BSP_SD_IsDetected() != SD_PRESENT)
  53:FATFS/Target/bsp_driver_sd.c ****   {
  54:FATFS/Target/bsp_driver_sd.c ****     return MSD_ERROR;
  55:FATFS/Target/bsp_driver_sd.c ****   }
  56:FATFS/Target/bsp_driver_sd.c ****   /* HAL SD initialization */
  57:FATFS/Target/bsp_driver_sd.c ****   sd_state = HAL_SD_Init(&hsd);
  58:FATFS/Target/bsp_driver_sd.c **** 
  59:FATFS/Target/bsp_driver_sd.c ****   return sd_state;
  60:FATFS/Target/bsp_driver_sd.c **** }
  61:FATFS/Target/bsp_driver_sd.c **** /* USER CODE BEGIN AfterInitSection */
  62:FATFS/Target/bsp_driver_sd.c **** /* can be used to modify previous code / undefine following code / add code */
  63:FATFS/Target/bsp_driver_sd.c **** /* USER CODE END AfterInitSection */
  64:FATFS/Target/bsp_driver_sd.c **** 
  65:FATFS/Target/bsp_driver_sd.c **** /* USER CODE BEGIN InterruptMode */
  66:FATFS/Target/bsp_driver_sd.c **** /**
  67:FATFS/Target/bsp_driver_sd.c ****   * @brief  Configures Interrupt mode for SD detection pin.
  68:FATFS/Target/bsp_driver_sd.c ****   * @retval Returns 0
  69:FATFS/Target/bsp_driver_sd.c ****   */
  70:FATFS/Target/bsp_driver_sd.c **** __weak uint8_t BSP_SD_ITConfig(void)
  71:FATFS/Target/bsp_driver_sd.c **** {
  29              		.loc 1 71 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  72:FATFS/Target/bsp_driver_sd.c ****   /* Code to be updated by the user or replaced by one from the FW pack (in a stmxxxx_sd.c file) */
  73:FATFS/Target/bsp_driver_sd.c **** 
  74:FATFS/Target/bsp_driver_sd.c ****   return (uint8_t)0;
  34              		.loc 1 74 3 view .LVU1
  75:FATFS/Target/bsp_driver_sd.c **** }
  35              		.loc 1 75 1 is_stmt 0 view .LVU2
  36 0000 0020     		movs	r0, #0
  37 0002 7047     		bx	lr
  38              		.cfi_endproc
  39              	.LFE135:
  41              		.section	.text.BSP_SD_DetectIT,"ax",%progbits
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s 			page 3


  42              		.align	1
  43              		.weak	BSP_SD_DetectIT
  44              		.syntax unified
  45              		.thumb
  46              		.thumb_func
  48              	BSP_SD_DetectIT:
  49              	.LFB136:
  76:FATFS/Target/bsp_driver_sd.c **** 
  77:FATFS/Target/bsp_driver_sd.c **** /** @brief  SD detect IT treatment
  78:FATFS/Target/bsp_driver_sd.c ****   */
  79:FATFS/Target/bsp_driver_sd.c **** __weak void BSP_SD_DetectIT(void)
  80:FATFS/Target/bsp_driver_sd.c **** {
  50              		.loc 1 80 1 is_stmt 1 view -0
  51              		.cfi_startproc
  52              		@ args = 0, pretend = 0, frame = 0
  53              		@ frame_needed = 0, uses_anonymous_args = 0
  54              		@ link register save eliminated.
  81:FATFS/Target/bsp_driver_sd.c ****   /* Code to be updated by the user or replaced by one from the FW pack (in a stmxxxx_sd.c file) */
  82:FATFS/Target/bsp_driver_sd.c **** }
  55              		.loc 1 82 1 view .LVU4
  56 0000 7047     		bx	lr
  57              		.cfi_endproc
  58              	.LFE136:
  60              		.section	.text.BSP_SD_ReadBlocks,"ax",%progbits
  61              		.align	1
  62              		.weak	BSP_SD_ReadBlocks
  63              		.syntax unified
  64              		.thumb
  65              		.thumb_func
  67              	BSP_SD_ReadBlocks:
  68              	.LVL0:
  69              	.LFB137:
  83:FATFS/Target/bsp_driver_sd.c **** /* USER CODE END InterruptMode */
  84:FATFS/Target/bsp_driver_sd.c **** 
  85:FATFS/Target/bsp_driver_sd.c **** /* USER CODE BEGIN BeforeReadBlocksSection */
  86:FATFS/Target/bsp_driver_sd.c **** /* can be used to modify previous code / undefine following code / add code */
  87:FATFS/Target/bsp_driver_sd.c **** /* USER CODE END BeforeReadBlocksSection */
  88:FATFS/Target/bsp_driver_sd.c **** /**
  89:FATFS/Target/bsp_driver_sd.c ****   * @brief  Reads block(s) from a specified address in an SD card, in polling mode.
  90:FATFS/Target/bsp_driver_sd.c ****   * @param  pData: Pointer to the buffer that will contain the data to transmit
  91:FATFS/Target/bsp_driver_sd.c ****   * @param  ReadAddr: Address from where data is to be read
  92:FATFS/Target/bsp_driver_sd.c ****   * @param  NumOfBlocks: Number of SD blocks to read
  93:FATFS/Target/bsp_driver_sd.c ****   * @param  Timeout: Timeout for read operation
  94:FATFS/Target/bsp_driver_sd.c ****   * @retval SD status
  95:FATFS/Target/bsp_driver_sd.c ****   */
  96:FATFS/Target/bsp_driver_sd.c **** __weak uint8_t BSP_SD_ReadBlocks(uint32_t *pData, uint32_t ReadAddr, uint32_t NumOfBlocks, uint32_t
  97:FATFS/Target/bsp_driver_sd.c **** {
  70              		.loc 1 97 1 view -0
  71              		.cfi_startproc
  72              		@ args = 0, pretend = 0, frame = 0
  73              		@ frame_needed = 0, uses_anonymous_args = 0
  74              		.loc 1 97 1 is_stmt 0 view .LVU6
  75 0000 00B5     		push	{lr}
  76              		.cfi_def_cfa_offset 4
  77              		.cfi_offset 14, -4
  78 0002 83B0     		sub	sp, sp, #12
  79              		.cfi_def_cfa_offset 16
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s 			page 4


  98:FATFS/Target/bsp_driver_sd.c ****   uint8_t sd_state = MSD_OK;
  80              		.loc 1 98 3 is_stmt 1 view .LVU7
  81              	.LVL1:
  99:FATFS/Target/bsp_driver_sd.c **** 
 100:FATFS/Target/bsp_driver_sd.c ****   if (HAL_SD_ReadBlocks(&hsd, (uint8_t *)pData, ReadAddr, NumOfBlocks, Timeout) != HAL_OK)
  82              		.loc 1 100 3 view .LVU8
  83              		.loc 1 100 7 is_stmt 0 view .LVU9
  84 0004 0093     		str	r3, [sp]
  85 0006 1346     		mov	r3, r2
  86              	.LVL2:
  87              		.loc 1 100 7 view .LVU10
  88 0008 0A46     		mov	r2, r1
  89              	.LVL3:
  90              		.loc 1 100 7 view .LVU11
  91 000a 0146     		mov	r1, r0
  92              	.LVL4:
  93              		.loc 1 100 7 view .LVU12
  94 000c 0348     		ldr	r0, .L7
  95              	.LVL5:
  96              		.loc 1 100 7 view .LVU13
  97 000e FFF7FEFF 		bl	HAL_SD_ReadBlocks
  98              	.LVL6:
  99              		.loc 1 100 6 discriminator 1 view .LVU14
 100 0012 00B1     		cbz	r0, .L4
 101:FATFS/Target/bsp_driver_sd.c ****   {
 102:FATFS/Target/bsp_driver_sd.c ****     sd_state = MSD_ERROR;
 101              		.loc 1 102 14 view .LVU15
 102 0014 0120     		movs	r0, #1
 103              	.L4:
 104              	.LVL7:
 103:FATFS/Target/bsp_driver_sd.c ****   }
 104:FATFS/Target/bsp_driver_sd.c **** 
 105:FATFS/Target/bsp_driver_sd.c ****   return sd_state;
 105              		.loc 1 105 3 is_stmt 1 view .LVU16
 106:FATFS/Target/bsp_driver_sd.c **** }
 106              		.loc 1 106 1 is_stmt 0 view .LVU17
 107 0016 03B0     		add	sp, sp, #12
 108              		.cfi_def_cfa_offset 4
 109              		@ sp needed
 110 0018 5DF804FB 		ldr	pc, [sp], #4
 111              	.L8:
 112              		.align	2
 113              	.L7:
 114 001c 00000000 		.word	hsd
 115              		.cfi_endproc
 116              	.LFE137:
 118              		.section	.text.BSP_SD_WriteBlocks,"ax",%progbits
 119              		.align	1
 120              		.weak	BSP_SD_WriteBlocks
 121              		.syntax unified
 122              		.thumb
 123              		.thumb_func
 125              	BSP_SD_WriteBlocks:
 126              	.LVL8:
 127              	.LFB138:
 107:FATFS/Target/bsp_driver_sd.c **** 
 108:FATFS/Target/bsp_driver_sd.c **** /* USER CODE BEGIN BeforeWriteBlocksSection */
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s 			page 5


 109:FATFS/Target/bsp_driver_sd.c **** /* can be used to modify previous code / undefine following code / add code */
 110:FATFS/Target/bsp_driver_sd.c **** /* USER CODE END BeforeWriteBlocksSection */
 111:FATFS/Target/bsp_driver_sd.c **** /**
 112:FATFS/Target/bsp_driver_sd.c ****   * @brief  Writes block(s) to a specified address in an SD card, in polling mode.
 113:FATFS/Target/bsp_driver_sd.c ****   * @param  pData: Pointer to the buffer that will contain the data to transmit
 114:FATFS/Target/bsp_driver_sd.c ****   * @param  WriteAddr: Address from where data is to be written
 115:FATFS/Target/bsp_driver_sd.c ****   * @param  NumOfBlocks: Number of SD blocks to write
 116:FATFS/Target/bsp_driver_sd.c ****   * @param  Timeout: Timeout for write operation
 117:FATFS/Target/bsp_driver_sd.c ****   * @retval SD status
 118:FATFS/Target/bsp_driver_sd.c ****   */
 119:FATFS/Target/bsp_driver_sd.c **** __weak uint8_t BSP_SD_WriteBlocks(uint32_t *pData, uint32_t WriteAddr, uint32_t NumOfBlocks, uint32
 120:FATFS/Target/bsp_driver_sd.c **** {
 128              		.loc 1 120 1 is_stmt 1 view -0
 129              		.cfi_startproc
 130              		@ args = 0, pretend = 0, frame = 0
 131              		@ frame_needed = 0, uses_anonymous_args = 0
 132              		.loc 1 120 1 is_stmt 0 view .LVU19
 133 0000 00B5     		push	{lr}
 134              		.cfi_def_cfa_offset 4
 135              		.cfi_offset 14, -4
 136 0002 83B0     		sub	sp, sp, #12
 137              		.cfi_def_cfa_offset 16
 121:FATFS/Target/bsp_driver_sd.c ****   uint8_t sd_state = MSD_OK;
 138              		.loc 1 121 3 is_stmt 1 view .LVU20
 139              	.LVL9:
 122:FATFS/Target/bsp_driver_sd.c **** 
 123:FATFS/Target/bsp_driver_sd.c ****   if (HAL_SD_WriteBlocks(&hsd, (uint8_t *)pData, WriteAddr, NumOfBlocks, Timeout) != HAL_OK)
 140              		.loc 1 123 3 view .LVU21
 141              		.loc 1 123 7 is_stmt 0 view .LVU22
 142 0004 0093     		str	r3, [sp]
 143 0006 1346     		mov	r3, r2
 144              	.LVL10:
 145              		.loc 1 123 7 view .LVU23
 146 0008 0A46     		mov	r2, r1
 147              	.LVL11:
 148              		.loc 1 123 7 view .LVU24
 149 000a 0146     		mov	r1, r0
 150              	.LVL12:
 151              		.loc 1 123 7 view .LVU25
 152 000c 0348     		ldr	r0, .L13
 153              	.LVL13:
 154              		.loc 1 123 7 view .LVU26
 155 000e FFF7FEFF 		bl	HAL_SD_WriteBlocks
 156              	.LVL14:
 157              		.loc 1 123 6 discriminator 1 view .LVU27
 158 0012 00B1     		cbz	r0, .L10
 124:FATFS/Target/bsp_driver_sd.c ****   {
 125:FATFS/Target/bsp_driver_sd.c ****     sd_state = MSD_ERROR;
 159              		.loc 1 125 14 view .LVU28
 160 0014 0120     		movs	r0, #1
 161              	.L10:
 162              	.LVL15:
 126:FATFS/Target/bsp_driver_sd.c ****   }
 127:FATFS/Target/bsp_driver_sd.c **** 
 128:FATFS/Target/bsp_driver_sd.c ****   return sd_state;
 163              		.loc 1 128 3 is_stmt 1 view .LVU29
 129:FATFS/Target/bsp_driver_sd.c **** }
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s 			page 6


 164              		.loc 1 129 1 is_stmt 0 view .LVU30
 165 0016 03B0     		add	sp, sp, #12
 166              		.cfi_def_cfa_offset 4
 167              		@ sp needed
 168 0018 5DF804FB 		ldr	pc, [sp], #4
 169              	.L14:
 170              		.align	2
 171              	.L13:
 172 001c 00000000 		.word	hsd
 173              		.cfi_endproc
 174              	.LFE138:
 176              		.section	.text.BSP_SD_ReadBlocks_DMA,"ax",%progbits
 177              		.align	1
 178              		.weak	BSP_SD_ReadBlocks_DMA
 179              		.syntax unified
 180              		.thumb
 181              		.thumb_func
 183              	BSP_SD_ReadBlocks_DMA:
 184              	.LVL16:
 185              	.LFB139:
 130:FATFS/Target/bsp_driver_sd.c **** 
 131:FATFS/Target/bsp_driver_sd.c **** /* USER CODE BEGIN BeforeReadDMABlocksSection */
 132:FATFS/Target/bsp_driver_sd.c **** /* can be used to modify previous code / undefine following code / add code */
 133:FATFS/Target/bsp_driver_sd.c **** /* USER CODE END BeforeReadDMABlocksSection */
 134:FATFS/Target/bsp_driver_sd.c **** /**
 135:FATFS/Target/bsp_driver_sd.c ****   * @brief  Reads block(s) from a specified address in an SD card, in DMA mode.
 136:FATFS/Target/bsp_driver_sd.c ****   * @param  pData: Pointer to the buffer that will contain the data to transmit
 137:FATFS/Target/bsp_driver_sd.c ****   * @param  ReadAddr: Address from where data is to be read
 138:FATFS/Target/bsp_driver_sd.c ****   * @param  NumOfBlocks: Number of SD blocks to read
 139:FATFS/Target/bsp_driver_sd.c ****   * @retval SD status
 140:FATFS/Target/bsp_driver_sd.c ****   */
 141:FATFS/Target/bsp_driver_sd.c **** __weak uint8_t BSP_SD_ReadBlocks_DMA(uint32_t *pData, uint32_t ReadAddr, uint32_t NumOfBlocks)
 142:FATFS/Target/bsp_driver_sd.c **** {
 186              		.loc 1 142 1 is_stmt 1 view -0
 187              		.cfi_startproc
 188              		@ args = 0, pretend = 0, frame = 0
 189              		@ frame_needed = 0, uses_anonymous_args = 0
 190              		.loc 1 142 1 is_stmt 0 view .LVU32
 191 0000 08B5     		push	{r3, lr}
 192              		.cfi_def_cfa_offset 8
 193              		.cfi_offset 3, -8
 194              		.cfi_offset 14, -4
 195 0002 1346     		mov	r3, r2
 143:FATFS/Target/bsp_driver_sd.c ****   uint8_t sd_state = MSD_OK;
 196              		.loc 1 143 3 is_stmt 1 view .LVU33
 197              	.LVL17:
 144:FATFS/Target/bsp_driver_sd.c **** 
 145:FATFS/Target/bsp_driver_sd.c ****   /* Read block(s) in DMA transfer mode */
 146:FATFS/Target/bsp_driver_sd.c ****   if (HAL_SD_ReadBlocks_DMA(&hsd, (uint8_t *)pData, ReadAddr, NumOfBlocks) != HAL_OK)
 198              		.loc 1 146 3 view .LVU34
 199              		.loc 1 146 7 is_stmt 0 view .LVU35
 200 0004 0A46     		mov	r2, r1
 201              	.LVL18:
 202              		.loc 1 146 7 view .LVU36
 203 0006 0146     		mov	r1, r0
 204              	.LVL19:
 205              		.loc 1 146 7 view .LVU37
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s 			page 7


 206 0008 0248     		ldr	r0, .L19
 207              	.LVL20:
 208              		.loc 1 146 7 view .LVU38
 209 000a FFF7FEFF 		bl	HAL_SD_ReadBlocks_DMA
 210              	.LVL21:
 211              		.loc 1 146 6 discriminator 1 view .LVU39
 212 000e 00B1     		cbz	r0, .L16
 147:FATFS/Target/bsp_driver_sd.c ****   {
 148:FATFS/Target/bsp_driver_sd.c ****     sd_state = MSD_ERROR;
 213              		.loc 1 148 14 view .LVU40
 214 0010 0120     		movs	r0, #1
 215              	.L16:
 216              	.LVL22:
 149:FATFS/Target/bsp_driver_sd.c ****   }
 150:FATFS/Target/bsp_driver_sd.c **** 
 151:FATFS/Target/bsp_driver_sd.c ****   return sd_state;
 217              		.loc 1 151 3 is_stmt 1 view .LVU41
 152:FATFS/Target/bsp_driver_sd.c **** }
 218              		.loc 1 152 1 is_stmt 0 view .LVU42
 219 0012 08BD     		pop	{r3, pc}
 220              	.L20:
 221              		.align	2
 222              	.L19:
 223 0014 00000000 		.word	hsd
 224              		.cfi_endproc
 225              	.LFE139:
 227              		.section	.text.BSP_SD_WriteBlocks_DMA,"ax",%progbits
 228              		.align	1
 229              		.weak	BSP_SD_WriteBlocks_DMA
 230              		.syntax unified
 231              		.thumb
 232              		.thumb_func
 234              	BSP_SD_WriteBlocks_DMA:
 235              	.LVL23:
 236              	.LFB140:
 153:FATFS/Target/bsp_driver_sd.c **** 
 154:FATFS/Target/bsp_driver_sd.c **** /* USER CODE BEGIN BeforeWriteDMABlocksSection */
 155:FATFS/Target/bsp_driver_sd.c **** /* can be used to modify previous code / undefine following code / add code */
 156:FATFS/Target/bsp_driver_sd.c **** /* USER CODE END BeforeWriteDMABlocksSection */
 157:FATFS/Target/bsp_driver_sd.c **** /**
 158:FATFS/Target/bsp_driver_sd.c ****   * @brief  Writes block(s) to a specified address in an SD card, in DMA mode.
 159:FATFS/Target/bsp_driver_sd.c ****   * @param  pData: Pointer to the buffer that will contain the data to transmit
 160:FATFS/Target/bsp_driver_sd.c ****   * @param  WriteAddr: Address from where data is to be written
 161:FATFS/Target/bsp_driver_sd.c ****   * @param  NumOfBlocks: Number of SD blocks to write
 162:FATFS/Target/bsp_driver_sd.c ****   * @retval SD status
 163:FATFS/Target/bsp_driver_sd.c ****   */
 164:FATFS/Target/bsp_driver_sd.c **** __weak uint8_t BSP_SD_WriteBlocks_DMA(uint32_t *pData, uint32_t WriteAddr, uint32_t NumOfBlocks)
 165:FATFS/Target/bsp_driver_sd.c **** {
 237              		.loc 1 165 1 is_stmt 1 view -0
 238              		.cfi_startproc
 239              		@ args = 0, pretend = 0, frame = 0
 240              		@ frame_needed = 0, uses_anonymous_args = 0
 241              		.loc 1 165 1 is_stmt 0 view .LVU44
 242 0000 08B5     		push	{r3, lr}
 243              		.cfi_def_cfa_offset 8
 244              		.cfi_offset 3, -8
 245              		.cfi_offset 14, -4
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s 			page 8


 246 0002 1346     		mov	r3, r2
 166:FATFS/Target/bsp_driver_sd.c ****   uint8_t sd_state = MSD_OK;
 247              		.loc 1 166 3 is_stmt 1 view .LVU45
 248              	.LVL24:
 167:FATFS/Target/bsp_driver_sd.c **** 
 168:FATFS/Target/bsp_driver_sd.c ****   /* Write block(s) in DMA transfer mode */
 169:FATFS/Target/bsp_driver_sd.c ****   if (HAL_SD_WriteBlocks_DMA(&hsd, (uint8_t *)pData, WriteAddr, NumOfBlocks) != HAL_OK)
 249              		.loc 1 169 3 view .LVU46
 250              		.loc 1 169 7 is_stmt 0 view .LVU47
 251 0004 0A46     		mov	r2, r1
 252              	.LVL25:
 253              		.loc 1 169 7 view .LVU48
 254 0006 0146     		mov	r1, r0
 255              	.LVL26:
 256              		.loc 1 169 7 view .LVU49
 257 0008 0248     		ldr	r0, .L25
 258              	.LVL27:
 259              		.loc 1 169 7 view .LVU50
 260 000a FFF7FEFF 		bl	HAL_SD_WriteBlocks_DMA
 261              	.LVL28:
 262              		.loc 1 169 6 discriminator 1 view .LVU51
 263 000e 00B1     		cbz	r0, .L22
 170:FATFS/Target/bsp_driver_sd.c ****   {
 171:FATFS/Target/bsp_driver_sd.c ****     sd_state = MSD_ERROR;
 264              		.loc 1 171 14 view .LVU52
 265 0010 0120     		movs	r0, #1
 266              	.L22:
 267              	.LVL29:
 172:FATFS/Target/bsp_driver_sd.c ****   }
 173:FATFS/Target/bsp_driver_sd.c **** 
 174:FATFS/Target/bsp_driver_sd.c ****   return sd_state;
 268              		.loc 1 174 3 is_stmt 1 view .LVU53
 175:FATFS/Target/bsp_driver_sd.c **** }
 269              		.loc 1 175 1 is_stmt 0 view .LVU54
 270 0012 08BD     		pop	{r3, pc}
 271              	.L26:
 272              		.align	2
 273              	.L25:
 274 0014 00000000 		.word	hsd
 275              		.cfi_endproc
 276              	.LFE140:
 278              		.section	.text.BSP_SD_Erase,"ax",%progbits
 279              		.align	1
 280              		.weak	BSP_SD_Erase
 281              		.syntax unified
 282              		.thumb
 283              		.thumb_func
 285              	BSP_SD_Erase:
 286              	.LVL30:
 287              	.LFB141:
 176:FATFS/Target/bsp_driver_sd.c **** 
 177:FATFS/Target/bsp_driver_sd.c **** /* USER CODE BEGIN BeforeEraseSection */
 178:FATFS/Target/bsp_driver_sd.c **** /* can be used to modify previous code / undefine following code / add code */
 179:FATFS/Target/bsp_driver_sd.c **** /* USER CODE END BeforeEraseSection */
 180:FATFS/Target/bsp_driver_sd.c **** /**
 181:FATFS/Target/bsp_driver_sd.c ****   * @brief  Erases the specified memory area of the given SD card.
 182:FATFS/Target/bsp_driver_sd.c ****   * @param  StartAddr: Start byte address
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s 			page 9


 183:FATFS/Target/bsp_driver_sd.c ****   * @param  EndAddr: End byte address
 184:FATFS/Target/bsp_driver_sd.c ****   * @retval SD status
 185:FATFS/Target/bsp_driver_sd.c ****   */
 186:FATFS/Target/bsp_driver_sd.c **** __weak uint8_t BSP_SD_Erase(uint32_t StartAddr, uint32_t EndAddr)
 187:FATFS/Target/bsp_driver_sd.c **** {
 288              		.loc 1 187 1 is_stmt 1 view -0
 289              		.cfi_startproc
 290              		@ args = 0, pretend = 0, frame = 0
 291              		@ frame_needed = 0, uses_anonymous_args = 0
 292              		.loc 1 187 1 is_stmt 0 view .LVU56
 293 0000 08B5     		push	{r3, lr}
 294              		.cfi_def_cfa_offset 8
 295              		.cfi_offset 3, -8
 296              		.cfi_offset 14, -4
 297 0002 0A46     		mov	r2, r1
 188:FATFS/Target/bsp_driver_sd.c ****   uint8_t sd_state = MSD_OK;
 298              		.loc 1 188 3 is_stmt 1 view .LVU57
 299              	.LVL31:
 189:FATFS/Target/bsp_driver_sd.c **** 
 190:FATFS/Target/bsp_driver_sd.c ****   if (HAL_SD_Erase(&hsd, StartAddr, EndAddr) != HAL_OK)
 300              		.loc 1 190 3 view .LVU58
 301              		.loc 1 190 7 is_stmt 0 view .LVU59
 302 0004 0146     		mov	r1, r0
 303              	.LVL32:
 304              		.loc 1 190 7 view .LVU60
 305 0006 0348     		ldr	r0, .L31
 306              	.LVL33:
 307              		.loc 1 190 7 view .LVU61
 308 0008 FFF7FEFF 		bl	HAL_SD_Erase
 309              	.LVL34:
 310              		.loc 1 190 6 discriminator 1 view .LVU62
 311 000c 00B1     		cbz	r0, .L28
 191:FATFS/Target/bsp_driver_sd.c ****   {
 192:FATFS/Target/bsp_driver_sd.c ****     sd_state = MSD_ERROR;
 312              		.loc 1 192 14 view .LVU63
 313 000e 0120     		movs	r0, #1
 314              	.L28:
 315              	.LVL35:
 193:FATFS/Target/bsp_driver_sd.c ****   }
 194:FATFS/Target/bsp_driver_sd.c **** 
 195:FATFS/Target/bsp_driver_sd.c ****   return sd_state;
 316              		.loc 1 195 3 is_stmt 1 view .LVU64
 196:FATFS/Target/bsp_driver_sd.c **** }
 317              		.loc 1 196 1 is_stmt 0 view .LVU65
 318 0010 08BD     		pop	{r3, pc}
 319              	.L32:
 320 0012 00BF     		.align	2
 321              	.L31:
 322 0014 00000000 		.word	hsd
 323              		.cfi_endproc
 324              	.LFE141:
 326              		.section	.text.BSP_SD_GetCardState,"ax",%progbits
 327              		.align	1
 328              		.weak	BSP_SD_GetCardState
 329              		.syntax unified
 330              		.thumb
 331              		.thumb_func
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s 			page 10


 333              	BSP_SD_GetCardState:
 334              	.LFB142:
 197:FATFS/Target/bsp_driver_sd.c **** 
 198:FATFS/Target/bsp_driver_sd.c **** /**
 199:FATFS/Target/bsp_driver_sd.c ****   * @brief  Gets the current SD card data status.
 200:FATFS/Target/bsp_driver_sd.c ****   * @param  None
 201:FATFS/Target/bsp_driver_sd.c ****   * @retval Data transfer state.
 202:FATFS/Target/bsp_driver_sd.c ****   *          This value can be one of the following values:
 203:FATFS/Target/bsp_driver_sd.c ****   *            @arg  SD_TRANSFER_OK: No data transfer is acting
 204:FATFS/Target/bsp_driver_sd.c ****   *            @arg  SD_TRANSFER_BUSY: Data transfer is acting
 205:FATFS/Target/bsp_driver_sd.c ****   */
 206:FATFS/Target/bsp_driver_sd.c **** __weak uint8_t BSP_SD_GetCardState(void)
 207:FATFS/Target/bsp_driver_sd.c **** {
 335              		.loc 1 207 1 is_stmt 1 view -0
 336              		.cfi_startproc
 337              		@ args = 0, pretend = 0, frame = 0
 338              		@ frame_needed = 0, uses_anonymous_args = 0
 339 0000 08B5     		push	{r3, lr}
 340              		.cfi_def_cfa_offset 8
 341              		.cfi_offset 3, -8
 342              		.cfi_offset 14, -4
 208:FATFS/Target/bsp_driver_sd.c ****   return ((HAL_SD_GetCardState(&hsd) == HAL_SD_CARD_TRANSFER ) ? SD_TRANSFER_OK : SD_TRANSFER_BUSY)
 343              		.loc 1 208 3 view .LVU67
 344              		.loc 1 208 12 is_stmt 0 view .LVU68
 345 0002 0348     		ldr	r0, .L35
 346 0004 FFF7FEFF 		bl	HAL_SD_GetCardState
 347              	.LVL36:
 209:FATFS/Target/bsp_driver_sd.c **** }
 348              		.loc 1 209 1 view .LVU69
 349 0008 0438     		subs	r0, r0, #4
 350 000a 18BF     		it	ne
 351 000c 0120     		movne	r0, #1
 352 000e 08BD     		pop	{r3, pc}
 353              	.L36:
 354              		.align	2
 355              	.L35:
 356 0010 00000000 		.word	hsd
 357              		.cfi_endproc
 358              	.LFE142:
 360              		.section	.text.BSP_SD_GetCardInfo,"ax",%progbits
 361              		.align	1
 362              		.weak	BSP_SD_GetCardInfo
 363              		.syntax unified
 364              		.thumb
 365              		.thumb_func
 367              	BSP_SD_GetCardInfo:
 368              	.LVL37:
 369              	.LFB143:
 210:FATFS/Target/bsp_driver_sd.c **** 
 211:FATFS/Target/bsp_driver_sd.c **** /**
 212:FATFS/Target/bsp_driver_sd.c ****   * @brief  Get SD information about specific SD card.
 213:FATFS/Target/bsp_driver_sd.c ****   * @param  CardInfo: Pointer to HAL_SD_CardInfoTypedef structure
 214:FATFS/Target/bsp_driver_sd.c ****   * @retval None
 215:FATFS/Target/bsp_driver_sd.c ****   */
 216:FATFS/Target/bsp_driver_sd.c **** __weak void BSP_SD_GetCardInfo(HAL_SD_CardInfoTypeDef *CardInfo)
 217:FATFS/Target/bsp_driver_sd.c **** {
 370              		.loc 1 217 1 is_stmt 1 view -0
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s 			page 11


 371              		.cfi_startproc
 372              		@ args = 0, pretend = 0, frame = 0
 373              		@ frame_needed = 0, uses_anonymous_args = 0
 374              		.loc 1 217 1 is_stmt 0 view .LVU71
 375 0000 08B5     		push	{r3, lr}
 376              		.cfi_def_cfa_offset 8
 377              		.cfi_offset 3, -8
 378              		.cfi_offset 14, -4
 379 0002 0146     		mov	r1, r0
 218:FATFS/Target/bsp_driver_sd.c ****   /* Get SD card Information */
 219:FATFS/Target/bsp_driver_sd.c ****   HAL_SD_GetCardInfo(&hsd, CardInfo);
 380              		.loc 1 219 3 is_stmt 1 view .LVU72
 381 0004 0148     		ldr	r0, .L39
 382              	.LVL38:
 383              		.loc 1 219 3 is_stmt 0 view .LVU73
 384 0006 FFF7FEFF 		bl	HAL_SD_GetCardInfo
 385              	.LVL39:
 220:FATFS/Target/bsp_driver_sd.c **** }
 386              		.loc 1 220 1 view .LVU74
 387 000a 08BD     		pop	{r3, pc}
 388              	.L40:
 389              		.align	2
 390              	.L39:
 391 000c 00000000 		.word	hsd
 392              		.cfi_endproc
 393              	.LFE143:
 395              		.section	.text.BSP_SD_AbortCallback,"ax",%progbits
 396              		.align	1
 397              		.weak	BSP_SD_AbortCallback
 398              		.syntax unified
 399              		.thumb
 400              		.thumb_func
 402              	BSP_SD_AbortCallback:
 403              	.LFB147:
 221:FATFS/Target/bsp_driver_sd.c **** 
 222:FATFS/Target/bsp_driver_sd.c **** /* USER CODE BEGIN BeforeCallBacksSection */
 223:FATFS/Target/bsp_driver_sd.c **** /* can be used to modify previous code / undefine following code / add code */
 224:FATFS/Target/bsp_driver_sd.c **** /* USER CODE END BeforeCallBacksSection */
 225:FATFS/Target/bsp_driver_sd.c **** /**
 226:FATFS/Target/bsp_driver_sd.c ****   * @brief SD Abort callbacks
 227:FATFS/Target/bsp_driver_sd.c ****   * @param hsd: SD handle
 228:FATFS/Target/bsp_driver_sd.c ****   * @retval None
 229:FATFS/Target/bsp_driver_sd.c ****   */
 230:FATFS/Target/bsp_driver_sd.c **** void HAL_SD_AbortCallback(SD_HandleTypeDef *hsd)
 231:FATFS/Target/bsp_driver_sd.c **** {
 232:FATFS/Target/bsp_driver_sd.c ****   BSP_SD_AbortCallback();
 233:FATFS/Target/bsp_driver_sd.c **** }
 234:FATFS/Target/bsp_driver_sd.c **** 
 235:FATFS/Target/bsp_driver_sd.c **** /**
 236:FATFS/Target/bsp_driver_sd.c ****   * @brief Tx Transfer completed callback
 237:FATFS/Target/bsp_driver_sd.c ****   * @param hsd: SD handle
 238:FATFS/Target/bsp_driver_sd.c ****   * @retval None
 239:FATFS/Target/bsp_driver_sd.c ****   */
 240:FATFS/Target/bsp_driver_sd.c **** void HAL_SD_TxCpltCallback(SD_HandleTypeDef *hsd)
 241:FATFS/Target/bsp_driver_sd.c **** {
 242:FATFS/Target/bsp_driver_sd.c ****   BSP_SD_WriteCpltCallback();
 243:FATFS/Target/bsp_driver_sd.c **** }
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s 			page 12


 244:FATFS/Target/bsp_driver_sd.c **** 
 245:FATFS/Target/bsp_driver_sd.c **** /**
 246:FATFS/Target/bsp_driver_sd.c ****   * @brief Rx Transfer completed callback
 247:FATFS/Target/bsp_driver_sd.c ****   * @param hsd: SD handle
 248:FATFS/Target/bsp_driver_sd.c ****   * @retval None
 249:FATFS/Target/bsp_driver_sd.c ****   */
 250:FATFS/Target/bsp_driver_sd.c **** void HAL_SD_RxCpltCallback(SD_HandleTypeDef *hsd)
 251:FATFS/Target/bsp_driver_sd.c **** {
 252:FATFS/Target/bsp_driver_sd.c ****   BSP_SD_ReadCpltCallback();
 253:FATFS/Target/bsp_driver_sd.c **** }
 254:FATFS/Target/bsp_driver_sd.c **** 
 255:FATFS/Target/bsp_driver_sd.c **** /* USER CODE BEGIN CallBacksSection_C */
 256:FATFS/Target/bsp_driver_sd.c **** /**
 257:FATFS/Target/bsp_driver_sd.c ****   * @brief BSP SD Abort callback
 258:FATFS/Target/bsp_driver_sd.c ****   * @retval None
 259:FATFS/Target/bsp_driver_sd.c ****   * @note empty (up to the user to fill it in or to remove it if useless)
 260:FATFS/Target/bsp_driver_sd.c ****   */
 261:FATFS/Target/bsp_driver_sd.c **** __weak void BSP_SD_AbortCallback(void)
 262:FATFS/Target/bsp_driver_sd.c **** {
 404              		.loc 1 262 1 is_stmt 1 view -0
 405              		.cfi_startproc
 406              		@ args = 0, pretend = 0, frame = 0
 407              		@ frame_needed = 0, uses_anonymous_args = 0
 408              		@ link register save eliminated.
 263:FATFS/Target/bsp_driver_sd.c **** 
 264:FATFS/Target/bsp_driver_sd.c **** }
 409              		.loc 1 264 1 view .LVU76
 410 0000 7047     		bx	lr
 411              		.cfi_endproc
 412              	.LFE147:
 414              		.section	.text.HAL_SD_AbortCallback,"ax",%progbits
 415              		.align	1
 416              		.global	HAL_SD_AbortCallback
 417              		.syntax unified
 418              		.thumb
 419              		.thumb_func
 421              	HAL_SD_AbortCallback:
 422              	.LVL40:
 423              	.LFB144:
 231:FATFS/Target/bsp_driver_sd.c ****   BSP_SD_AbortCallback();
 424              		.loc 1 231 1 view -0
 425              		.cfi_startproc
 426              		@ args = 0, pretend = 0, frame = 0
 427              		@ frame_needed = 0, uses_anonymous_args = 0
 231:FATFS/Target/bsp_driver_sd.c ****   BSP_SD_AbortCallback();
 428              		.loc 1 231 1 is_stmt 0 view .LVU78
 429 0000 08B5     		push	{r3, lr}
 430              		.cfi_def_cfa_offset 8
 431              		.cfi_offset 3, -8
 432              		.cfi_offset 14, -4
 232:FATFS/Target/bsp_driver_sd.c **** }
 433              		.loc 1 232 3 is_stmt 1 view .LVU79
 434 0002 FFF7FEFF 		bl	BSP_SD_AbortCallback
 435              	.LVL41:
 233:FATFS/Target/bsp_driver_sd.c **** 
 436              		.loc 1 233 1 is_stmt 0 view .LVU80
 437 0006 08BD     		pop	{r3, pc}
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s 			page 13


 438              		.cfi_endproc
 439              	.LFE144:
 441              		.section	.text.BSP_SD_WriteCpltCallback,"ax",%progbits
 442              		.align	1
 443              		.weak	BSP_SD_WriteCpltCallback
 444              		.syntax unified
 445              		.thumb
 446              		.thumb_func
 448              	BSP_SD_WriteCpltCallback:
 449              	.LFB148:
 265:FATFS/Target/bsp_driver_sd.c **** 
 266:FATFS/Target/bsp_driver_sd.c **** /**
 267:FATFS/Target/bsp_driver_sd.c ****   * @brief BSP Tx Transfer completed callback
 268:FATFS/Target/bsp_driver_sd.c ****   * @retval None
 269:FATFS/Target/bsp_driver_sd.c ****   * @note empty (up to the user to fill it in or to remove it if useless)
 270:FATFS/Target/bsp_driver_sd.c ****   */
 271:FATFS/Target/bsp_driver_sd.c **** __weak void BSP_SD_WriteCpltCallback(void)
 272:FATFS/Target/bsp_driver_sd.c **** {
 450              		.loc 1 272 1 is_stmt 1 view -0
 451              		.cfi_startproc
 452              		@ args = 0, pretend = 0, frame = 0
 453              		@ frame_needed = 0, uses_anonymous_args = 0
 454              		@ link register save eliminated.
 273:FATFS/Target/bsp_driver_sd.c **** 
 274:FATFS/Target/bsp_driver_sd.c **** }
 455              		.loc 1 274 1 view .LVU82
 456 0000 7047     		bx	lr
 457              		.cfi_endproc
 458              	.LFE148:
 460              		.section	.text.HAL_SD_TxCpltCallback,"ax",%progbits
 461              		.align	1
 462              		.global	HAL_SD_TxCpltCallback
 463              		.syntax unified
 464              		.thumb
 465              		.thumb_func
 467              	HAL_SD_TxCpltCallback:
 468              	.LVL42:
 469              	.LFB145:
 241:FATFS/Target/bsp_driver_sd.c ****   BSP_SD_WriteCpltCallback();
 470              		.loc 1 241 1 view -0
 471              		.cfi_startproc
 472              		@ args = 0, pretend = 0, frame = 0
 473              		@ frame_needed = 0, uses_anonymous_args = 0
 241:FATFS/Target/bsp_driver_sd.c ****   BSP_SD_WriteCpltCallback();
 474              		.loc 1 241 1 is_stmt 0 view .LVU84
 475 0000 08B5     		push	{r3, lr}
 476              		.cfi_def_cfa_offset 8
 477              		.cfi_offset 3, -8
 478              		.cfi_offset 14, -4
 242:FATFS/Target/bsp_driver_sd.c **** }
 479              		.loc 1 242 3 is_stmt 1 view .LVU85
 480 0002 FFF7FEFF 		bl	BSP_SD_WriteCpltCallback
 481              	.LVL43:
 243:FATFS/Target/bsp_driver_sd.c **** 
 482              		.loc 1 243 1 is_stmt 0 view .LVU86
 483 0006 08BD     		pop	{r3, pc}
 484              		.cfi_endproc
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s 			page 14


 485              	.LFE145:
 487              		.section	.text.BSP_SD_ReadCpltCallback,"ax",%progbits
 488              		.align	1
 489              		.weak	BSP_SD_ReadCpltCallback
 490              		.syntax unified
 491              		.thumb
 492              		.thumb_func
 494              	BSP_SD_ReadCpltCallback:
 495              	.LFB149:
 275:FATFS/Target/bsp_driver_sd.c **** 
 276:FATFS/Target/bsp_driver_sd.c **** /**
 277:FATFS/Target/bsp_driver_sd.c ****   * @brief BSP Rx Transfer completed callback
 278:FATFS/Target/bsp_driver_sd.c ****   * @retval None
 279:FATFS/Target/bsp_driver_sd.c ****   * @note empty (up to the user to fill it in or to remove it if useless)
 280:FATFS/Target/bsp_driver_sd.c ****   */
 281:FATFS/Target/bsp_driver_sd.c **** __weak void BSP_SD_ReadCpltCallback(void)
 282:FATFS/Target/bsp_driver_sd.c **** {
 496              		.loc 1 282 1 is_stmt 1 view -0
 497              		.cfi_startproc
 498              		@ args = 0, pretend = 0, frame = 0
 499              		@ frame_needed = 0, uses_anonymous_args = 0
 500              		@ link register save eliminated.
 283:FATFS/Target/bsp_driver_sd.c **** 
 284:FATFS/Target/bsp_driver_sd.c **** }
 501              		.loc 1 284 1 view .LVU88
 502 0000 7047     		bx	lr
 503              		.cfi_endproc
 504              	.LFE149:
 506              		.section	.text.HAL_SD_RxCpltCallback,"ax",%progbits
 507              		.align	1
 508              		.global	HAL_SD_RxCpltCallback
 509              		.syntax unified
 510              		.thumb
 511              		.thumb_func
 513              	HAL_SD_RxCpltCallback:
 514              	.LVL44:
 515              	.LFB146:
 251:FATFS/Target/bsp_driver_sd.c ****   BSP_SD_ReadCpltCallback();
 516              		.loc 1 251 1 view -0
 517              		.cfi_startproc
 518              		@ args = 0, pretend = 0, frame = 0
 519              		@ frame_needed = 0, uses_anonymous_args = 0
 251:FATFS/Target/bsp_driver_sd.c ****   BSP_SD_ReadCpltCallback();
 520              		.loc 1 251 1 is_stmt 0 view .LVU90
 521 0000 08B5     		push	{r3, lr}
 522              		.cfi_def_cfa_offset 8
 523              		.cfi_offset 3, -8
 524              		.cfi_offset 14, -4
 252:FATFS/Target/bsp_driver_sd.c **** }
 525              		.loc 1 252 3 is_stmt 1 view .LVU91
 526 0002 FFF7FEFF 		bl	BSP_SD_ReadCpltCallback
 527              	.LVL45:
 253:FATFS/Target/bsp_driver_sd.c **** 
 528              		.loc 1 253 1 is_stmt 0 view .LVU92
 529 0006 08BD     		pop	{r3, pc}
 530              		.cfi_endproc
 531              	.LFE146:
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s 			page 15


 533              		.section	.text.BSP_SD_IsDetected,"ax",%progbits
 534              		.align	1
 535              		.weak	BSP_SD_IsDetected
 536              		.syntax unified
 537              		.thumb
 538              		.thumb_func
 540              	BSP_SD_IsDetected:
 541              	.LFB150:
 285:FATFS/Target/bsp_driver_sd.c **** /* USER CODE END CallBacksSection_C */
 286:FATFS/Target/bsp_driver_sd.c **** #endif
 287:FATFS/Target/bsp_driver_sd.c **** 
 288:FATFS/Target/bsp_driver_sd.c **** /**
 289:FATFS/Target/bsp_driver_sd.c ****  * @brief  Detects if SD card is correctly plugged in the memory slot or not.
 290:FATFS/Target/bsp_driver_sd.c ****  * @param  None
 291:FATFS/Target/bsp_driver_sd.c ****  * @retval Returns if SD is detected or not
 292:FATFS/Target/bsp_driver_sd.c ****  */
 293:FATFS/Target/bsp_driver_sd.c **** __weak uint8_t BSP_SD_IsDetected(void)
 294:FATFS/Target/bsp_driver_sd.c **** {
 542              		.loc 1 294 1 is_stmt 1 view -0
 543              		.cfi_startproc
 544              		@ args = 0, pretend = 0, frame = 8
 545              		@ frame_needed = 0, uses_anonymous_args = 0
 546 0000 00B5     		push	{lr}
 547              		.cfi_def_cfa_offset 4
 548              		.cfi_offset 14, -4
 549 0002 83B0     		sub	sp, sp, #12
 550              		.cfi_def_cfa_offset 16
 295:FATFS/Target/bsp_driver_sd.c ****   __IO uint8_t status = SD_PRESENT;
 551              		.loc 1 295 3 view .LVU94
 552              		.loc 1 295 16 is_stmt 0 view .LVU95
 553 0004 0123     		movs	r3, #1
 554 0006 8DF80730 		strb	r3, [sp, #7]
 296:FATFS/Target/bsp_driver_sd.c **** 
 297:FATFS/Target/bsp_driver_sd.c ****   if (BSP_PlatformIsDetected() == 0x0)
 555              		.loc 1 297 3 is_stmt 1 view .LVU96
 556              		.loc 1 297 7 is_stmt 0 view .LVU97
 557 000a FFF7FEFF 		bl	BSP_PlatformIsDetected
 558              	.LVL46:
 559              		.loc 1 297 6 discriminator 1 view .LVU98
 560 000e 10B9     		cbnz	r0, .L51
 298:FATFS/Target/bsp_driver_sd.c ****   {
 299:FATFS/Target/bsp_driver_sd.c ****     status = SD_NOT_PRESENT;
 561              		.loc 1 299 5 is_stmt 1 view .LVU99
 562              		.loc 1 299 12 is_stmt 0 view .LVU100
 563 0010 0023     		movs	r3, #0
 564 0012 8DF80730 		strb	r3, [sp, #7]
 565              	.L51:
 300:FATFS/Target/bsp_driver_sd.c ****   }
 301:FATFS/Target/bsp_driver_sd.c **** 
 302:FATFS/Target/bsp_driver_sd.c ****   return status;
 566              		.loc 1 302 3 is_stmt 1 view .LVU101
 567              		.loc 1 302 10 is_stmt 0 view .LVU102
 568 0016 9DF80700 		ldrb	r0, [sp, #7]	@ zero_extendqisi2
 303:FATFS/Target/bsp_driver_sd.c **** }
 569              		.loc 1 303 1 view .LVU103
 570 001a 03B0     		add	sp, sp, #12
 571              		.cfi_def_cfa_offset 4
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s 			page 16


 572              		@ sp needed
 573 001c 5DF804FB 		ldr	pc, [sp], #4
 574              		.cfi_endproc
 575              	.LFE150:
 577              		.section	.text.BSP_SD_Init,"ax",%progbits
 578              		.align	1
 579              		.weak	BSP_SD_Init
 580              		.syntax unified
 581              		.thumb
 582              		.thumb_func
 584              	BSP_SD_Init:
 585              	.LFB134:
  49:FATFS/Target/bsp_driver_sd.c ****   uint8_t sd_state = MSD_OK;
 586              		.loc 1 49 1 is_stmt 1 view -0
 587              		.cfi_startproc
 588              		@ args = 0, pretend = 0, frame = 0
 589              		@ frame_needed = 0, uses_anonymous_args = 0
 590 0000 08B5     		push	{r3, lr}
 591              		.cfi_def_cfa_offset 8
 592              		.cfi_offset 3, -8
 593              		.cfi_offset 14, -4
  50:FATFS/Target/bsp_driver_sd.c ****   /* Check if the SD card is plugged in the slot */
 594              		.loc 1 50 3 view .LVU105
 595              	.LVL47:
  52:FATFS/Target/bsp_driver_sd.c ****   {
 596              		.loc 1 52 3 view .LVU106
  52:FATFS/Target/bsp_driver_sd.c ****   {
 597              		.loc 1 52 7 is_stmt 0 view .LVU107
 598 0002 FFF7FEFF 		bl	BSP_SD_IsDetected
 599              	.LVL48:
  52:FATFS/Target/bsp_driver_sd.c ****   {
 600              		.loc 1 52 6 discriminator 1 view .LVU108
 601 0006 0128     		cmp	r0, #1
 602 0008 01D0     		beq	.L57
  54:FATFS/Target/bsp_driver_sd.c ****   }
 603              		.loc 1 54 12 view .LVU109
 604 000a 0120     		movs	r0, #1
 605              	.LVL49:
 606              	.L54:
  60:FATFS/Target/bsp_driver_sd.c **** /* USER CODE BEGIN AfterInitSection */
 607              		.loc 1 60 1 view .LVU110
 608 000c 08BD     		pop	{r3, pc}
 609              	.LVL50:
 610              	.L57:
  57:FATFS/Target/bsp_driver_sd.c **** 
 611              		.loc 1 57 3 is_stmt 1 view .LVU111
  57:FATFS/Target/bsp_driver_sd.c **** 
 612              		.loc 1 57 14 is_stmt 0 view .LVU112
 613 000e 0248     		ldr	r0, .L58
 614 0010 FFF7FEFF 		bl	HAL_SD_Init
 615              	.LVL51:
  59:FATFS/Target/bsp_driver_sd.c **** }
 616              		.loc 1 59 3 is_stmt 1 view .LVU113
  59:FATFS/Target/bsp_driver_sd.c **** }
 617              		.loc 1 59 10 is_stmt 0 view .LVU114
 618 0014 FAE7     		b	.L54
 619              	.L59:
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s 			page 17


 620 0016 00BF     		.align	2
 621              	.L58:
 622 0018 00000000 		.word	hsd
 623              		.cfi_endproc
 624              	.LFE134:
 626              		.text
 627              	.Letext0:
 628              		.file 2 "C:/PROGRAM FILES (X86)/ARM GNU TOOLCHAIN ARM-NONE-EABI/13.3 REL1/arm-none-eabi/include/ma
 629              		.file 3 "C:/PROGRAM FILES (X86)/ARM GNU TOOLCHAIN ARM-NONE-EABI/13.3 REL1/arm-none-eabi/include/sy
 630              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f405xx.h"
 631              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 632              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 633              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_ll_sdmmc.h"
 634              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_sd.h"
 635              		.file 9 "FATFS/Target/fatfs_platform.h"
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s 			page 18


DEFINED SYMBOLS
                            *ABS*:00000000 bsp_driver_sd.c
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:21     .text.BSP_SD_ITConfig:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:27     .text.BSP_SD_ITConfig:00000000 BSP_SD_ITConfig
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:42     .text.BSP_SD_DetectIT:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:48     .text.BSP_SD_DetectIT:00000000 BSP_SD_DetectIT
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:61     .text.BSP_SD_ReadBlocks:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:67     .text.BSP_SD_ReadBlocks:00000000 BSP_SD_ReadBlocks
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:114    .text.BSP_SD_ReadBlocks:0000001c $d
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:119    .text.BSP_SD_WriteBlocks:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:125    .text.BSP_SD_WriteBlocks:00000000 BSP_SD_WriteBlocks
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:172    .text.BSP_SD_WriteBlocks:0000001c $d
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:177    .text.BSP_SD_ReadBlocks_DMA:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:183    .text.BSP_SD_ReadBlocks_DMA:00000000 BSP_SD_ReadBlocks_DMA
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:223    .text.BSP_SD_ReadBlocks_DMA:00000014 $d
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:228    .text.BSP_SD_WriteBlocks_DMA:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:234    .text.BSP_SD_WriteBlocks_DMA:00000000 BSP_SD_WriteBlocks_DMA
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:274    .text.BSP_SD_WriteBlocks_DMA:00000014 $d
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:279    .text.BSP_SD_Erase:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:285    .text.BSP_SD_Erase:00000000 BSP_SD_Erase
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:322    .text.BSP_SD_Erase:00000014 $d
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:327    .text.BSP_SD_GetCardState:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:333    .text.BSP_SD_GetCardState:00000000 BSP_SD_GetCardState
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:356    .text.BSP_SD_GetCardState:00000010 $d
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:361    .text.BSP_SD_GetCardInfo:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:367    .text.BSP_SD_GetCardInfo:00000000 BSP_SD_GetCardInfo
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:391    .text.BSP_SD_GetCardInfo:0000000c $d
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:396    .text.BSP_SD_AbortCallback:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:402    .text.BSP_SD_AbortCallback:00000000 BSP_SD_AbortCallback
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:415    .text.HAL_SD_AbortCallback:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:421    .text.HAL_SD_AbortCallback:00000000 HAL_SD_AbortCallback
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:442    .text.BSP_SD_WriteCpltCallback:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:448    .text.BSP_SD_WriteCpltCallback:00000000 BSP_SD_WriteCpltCallback
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:461    .text.HAL_SD_TxCpltCallback:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:467    .text.HAL_SD_TxCpltCallback:00000000 HAL_SD_TxCpltCallback
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:488    .text.BSP_SD_ReadCpltCallback:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:494    .text.BSP_SD_ReadCpltCallback:00000000 BSP_SD_ReadCpltCallback
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:507    .text.HAL_SD_RxCpltCallback:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:513    .text.HAL_SD_RxCpltCallback:00000000 HAL_SD_RxCpltCallback
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:534    .text.BSP_SD_IsDetected:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:540    .text.BSP_SD_IsDetected:00000000 BSP_SD_IsDetected
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:578    .text.BSP_SD_Init:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:584    .text.BSP_SD_Init:00000000 BSP_SD_Init
C:\Users\Nathan\AppData\Local\Temp\ccgo91Z2.s:622    .text.BSP_SD_Init:00000018 $d

UNDEFINED SYMBOLS
HAL_SD_ReadBlocks
hsd
HAL_SD_WriteBlocks
HAL_SD_ReadBlocks_DMA
HAL_SD_WriteBlocks_DMA
HAL_SD_Erase
HAL_SD_GetCardState
HAL_SD_GetCardInfo
BSP_PlatformIsDetected
HAL_SD_Init
